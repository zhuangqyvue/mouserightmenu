{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///mouserightmenu.js","webpack:///webpack/bootstrap 1fb38338608ee9806912","webpack:///./src/index.js","webpack:///./src/mouserightmenu/index.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","require","__webpack_exports__","value","install","Vue","options","GLOBLEsize","directive","bind","el","binding","vnode","document","body","style","position","width","height","currentSize","zIndex","Mask","createElement","Maskstyle","setAttribute","appendChild","addEventListener","e","event","window","stopPropagation","cancelBubble","preventDefault","getElementById","menuX","pageX","pageY","clientX","scrollLeft","clientLeft","menuY","clientY","scrollTop","clientTop","boxDiv","clientWidth","left","clientHeight","top","map","item","optionp","iconPosition","icon","content","callback","onclick","parentNode","display","context","img","Image","src","iconStyle","innerHTML","offsetWidth","unbind","removeEventListener"],"mappings":"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","file":"mouserightmenu.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"mouserightmenu\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mouserightmenu\"] = factory();\n\telse\n\t\troot[\"mouserightmenu\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"mouserightmenu\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mouserightmenu\"] = factory();\n\telse\n\t\troot[\"mouserightmenu\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(1);\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  // 调用use时候执行该方法\n  install: function install(Vue, options) {\n    var GLOBLEsize = 0;\n    // 声明\n    Vue.directive('mouserightmenu', {\n      // 插入时候触发\n      bind: function bind(el, binding, vnode) {\n        // 设置body宽高（为了遮照）\n        document.body.style.position = 'fixed';\n        document.body.style.width = '100%';\n        document.body.style.height = '100%';\n        // 防止id重复  每次累计加一\n        var currentSize = GLOBLEsize;\n        if (el.style.position == '') {\n          el.style.position = 'relative';\n        }\n        // 设置菜单层级高于遮罩层\n        el.style.zIndex = '99998';\n        /**\r\n         * 增加一个遮罩层方便我控制菜单显示时候取消其余事件\r\n         */\n        var Mask = document.createElement('div');\n        var Maskstyle = 'position:fixed;top:0;left:0;width:100%;height:100%;z-index:99997;';\n        Mask.style = Maskstyle + 'display:none';\n        Mask.setAttribute('id', 'TT_MASK');\n        document.body.appendChild(Mask);\n        el.addEventListener('contextmenu', function (e) {\n          // debugger;\n\n          var e = event || window.event;\n          e.stopPropagation(); //阻止冒泡事件\n          e.cancelBubble = true; //阻止冒泡事件ie\n          e.preventDefault(); //阻止默认事件\n          // 隐藏所有菜单\n          for (var i = 0; i < GLOBLEsize; i++) {\n            if (document.getElementById('tt_right_menu' + i)) {\n              document.getElementById('tt_right_menu' + i).style = 'display:none';\n            }\n          }\n          // 菜单位置\n          var menuX = e.pageX || e.pageY ? e.pageX : e.clientX + document.body.scrollLeft - document.body.clientLeft; //获取pageX 兼容ie\n          var menuY = e.pageX || e.pageY ? e.pageY : e.clientY + document.body.scrollTop - document.body.clientTop;\n          // 右键显示遮罩层\n          document.getElementById('TT_MASK').style = Maskstyle + 'display:block';\n          // 找不到这个节点时候 新增一个menu 用于多个菜单的兼容问题\n          if (!document.getElementById('tt_right_menu' + currentSize)) {\n            // 创建div\n            var boxDiv = document.createElement('div');\n            // 指令的绑定值进行遍历 生成菜单的节点\n            binding.value['menus'].map(function (item) {\n              var optionp = document.createElement('div');\n              // 控制icon位置\n              var iconPosition = '';\n              // icon内容\n              var icon = '';\n              // 文字内容\n              var content = '';\n              // 设置节点文字不可选中\n              optionp.setAttribute('unselectable', 'on');\n\n              /**\r\n               * 兼容用户没有callback的情况\r\n               */\n              if (item.callback) {\n                optionp.onclick = function () {\n                  // 隐藏菜单的父级节点\n                  optionp.parentNode.style.display = 'none';\n                  // 隐藏遮罩层\n                  Mask.style = Maskstyle + 'display:none';\n\n                  return vnode.context[item.callback](item);\n                };\n              } else {\n                // 无callback情况\n                optionp.onclick = function () {\n                  // 隐藏菜单的父级节点\n                  optionp.parentNode.style.display = 'none';\n                  // 隐藏遮罩层\n                  Mask.style = Maskstyle + 'display:none';\n                  return false;\n                };\n              }\n              /**\r\n               * 兼容在展开的选项上右击会出现默认右键，以及禁用穿透事件\r\n               */\n              optionp.addEventListener('contextmenu', function (e) {\n                var e = event || window.event;\n                e.stopPropagation(); //阻止冒泡事件\n                e.cancelBubble = true; //阻止冒泡事件ie\n                e.preventDefault(); //阻止默认事件\n              });\n              // 如果用户设置了icon\n              if (item.icon) {\n                // 判断icon位置是左还是右面 -》 可扩展为一个函数 让用户更高程度自定义\n                if (item.iconPosition && (item.iconPosition == 'left' || item.iconPosition == 'right')) {\n                  iconPosition = item.iconPosition;\n                } else {\n                  // 默认值 left\n                  iconPosition = 'left';\n                }\n                icon = item.icon;\n              }\n              // 判断content文字 也可以升级为一个函数提高可扩展性\n              if (item.content) {\n                content = item.content;\n              }\n              // 判断icon是否有\n              if (icon != '') {\n                // 剧左或者右\n                if (iconPosition == 'right') {\n                  // 生成img\n                  var img = new Image();\n                  img.src = icon;\n                  img.style = (item.iconStyle || '') + 'vertical-align:middle;';\n                  optionp.innerHTML = content;\n                  // 追加到option\n                  optionp.appendChild(img);\n                } else {\n                  var _img = new Image();\n                  _img.src = icon;\n                  _img.style = (item.iconStyle || '') + 'vertical-align:middle;';\n                  optionp.appendChild(_img);\n                  optionp.innerHTML += content;\n                }\n              } else {\n                // 设置文字内容\n                optionp.innerHTML = content;\n              }\n              /**\r\n               * 兼容屏幕出界的情况；\r\n               */\n              optionp.style = 'text-align:center;overflow: hidden;text-overflow:ellipsis;white-space:nowrap;margin-block-start: 0em;margin-block-end: 0em;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;' + (binding.value['optionStyle'] ? binding.value['optionStyle'] : '') + ';' + (item['style'] ? item['style'] : '') + ';';\n              // 追加选项到总菜单\n              boxDiv.appendChild(optionp);\n            });\n            // 设置唯一id\n            boxDiv.setAttribute('id', 'tt_right_menu' + currentSize);\n            // 菜单的样式\n            boxDiv.style = 'background:#fff;color:#333;' + (binding.value['boxStyle'] ? binding.value['boxStyle'] : '') + ';position:fixed;z-index:99999;top:' + menuY + 'px;left:' + menuX + 'px;';\n            //    追加到页面\n            document.body.appendChild(boxDiv);\n            var divWidth = boxDiv.clientWidth || boxDiv.offsetWidth;\n          } else {\n            // 节点已经存在则不需要重复创建 节省性能，只需要获取后设置位置即可\n            var _boxDiv = document.getElementById('tt_right_menu' + currentSize);\n            _boxDiv.style = 'color:#333;background:#fff;' + (binding.value['boxStyle'] ? binding.value['boxStyle'] : '') + ';position:fixed;z-index:99999;top:' + menuY + 'px;left:' + menuX + 'px;';\n            /**\r\n             * 判断是否超出屏幕宽度\r\n             */\n            if (menuX + _boxDiv.clientWidth >= document.body.clientWidth) {\n              _boxDiv.style.left = menuX - _boxDiv.clientWidth + 'px';\n            }\n            /**\r\n             * 判断是否超出屏幕高度\r\n             */\n            if (menuY + _boxDiv.clientHeight >= document.body.clientHeight) {\n              _boxDiv.style.top = menuY - _boxDiv.clientHeight + 'px';\n            }\n          }\n        });\n        // 每次创建都会使得唯一遍量增加 防止重复\n        GLOBLEsize++;\n        // 增加遮罩层的点击事件 （在空白处点击移除右键菜单）-》包含左键和右键点击\n        document.getElementById('TT_MASK').addEventListener('click', function () {\n          if (document.getElementById('tt_right_menu' + currentSize)) {\n            document.getElementById('tt_right_menu' + currentSize).style = 'display:none';\n          }\n          document.getElementById('TT_MASK').style = 'display:none';\n        });\n        document.getElementById('TT_MASK').addEventListener('contextmenu', function () {\n          if (document.getElementById('tt_right_menu' + currentSize)) {\n            document.getElementById('tt_right_menu' + currentSize).style = 'display:none';\n          }\n          document.getElementById('TT_MASK').style = 'display:none';\n        });\n      },\n      unbind: function unbind(el) {\n        // 解绑时候移除右键监听防止影响其他页面\n        el.removeEventListener('contextmenu', this, true);\n      }\n    });\n  }\n});\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// mouserightmenu.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1fb38338608ee9806912","module.exports = require('./mouserightmenu/index')\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export default {\r\n  // 调用use时候执行该方法\r\n  install: function(Vue, options) {\r\n    var GLOBLEsize = 0\r\n    // 声明\r\n    Vue.directive('mouserightmenu', {\r\n      // 插入时候触发\r\n      bind(el, binding, vnode) {\r\n        // 设置body宽高（为了遮照）\r\n        document.body.style.position = 'fixed'\r\n        document.body.style.width = '100%'\r\n        document.body.style.height = '100%'\r\n        // 防止id重复  每次累计加一\r\n        let currentSize = GLOBLEsize\r\n        if (el.style.position == '') {\r\n          el.style.position = 'relative'\r\n        }\r\n        // 设置菜单层级高于遮罩层\r\n        el.style.zIndex = '99998'\r\n        /**\r\n         * 增加一个遮罩层方便我控制菜单显示时候取消其余事件\r\n         */\r\n        var Mask = document.createElement('div')\r\n        var Maskstyle =\r\n          'position:fixed;top:0;left:0;width:100%;height:100%;z-index:99997;'\r\n        Mask.style = Maskstyle + 'display:none'\r\n        Mask.setAttribute('id', 'TT_MASK')\r\n        document.body.appendChild(Mask)\r\n        el.addEventListener('contextmenu', e => {\r\n          // debugger;\r\n\r\n          var e = event || window.event\r\n          e.stopPropagation() //阻止冒泡事件\r\n          e.cancelBubble = true //阻止冒泡事件ie\r\n          e.preventDefault() //阻止默认事件\r\n          // 隐藏所有菜单\r\n          for (let i = 0; i < GLOBLEsize; i++) {\r\n            if (document.getElementById('tt_right_menu' + i)) {\r\n              document.getElementById(\r\n                'tt_right_menu' + i\r\n              ).style = `display:none`\r\n            }\r\n          }\r\n          // 菜单位置\r\n          var menuX =\r\n            e.pageX || e.pageY\r\n              ? e.pageX\r\n              : e.clientX + document.body.scrollLeft - document.body.clientLeft //获取pageX 兼容ie\r\n          var menuY =\r\n            e.pageX || e.pageY\r\n              ? e.pageY\r\n              : e.clientY + document.body.scrollTop - document.body.clientTop\r\n          // 右键显示遮罩层\r\n          document.getElementById('TT_MASK').style = Maskstyle + 'display:block'\r\n          // 找不到这个节点时候 新增一个menu 用于多个菜单的兼容问题\r\n          if (!document.getElementById('tt_right_menu' + currentSize)) {\r\n            // 创建div\r\n            let boxDiv = document.createElement('div')\r\n            // 指令的绑定值进行遍历 生成菜单的节点\r\n            binding.value['menus'].map(item => {\r\n              let optionp = document.createElement('div')\r\n              // 控制icon位置\r\n              let iconPosition = ''\r\n              // icon内容\r\n              let icon = ''\r\n              // 文字内容\r\n              let content = ''\r\n              // 设置节点文字不可选中\r\n              optionp.setAttribute('unselectable', 'on')\r\n\r\n              /**\r\n               * 兼容用户没有callback的情况\r\n               */\r\n              if (item.callback) {\r\n                optionp.onclick = function() {\r\n                  // 隐藏菜单的父级节点\r\n                  optionp.parentNode.style.display = 'none'\r\n                  // 隐藏遮罩层\r\n                  Mask.style = Maskstyle + 'display:none'\r\n\r\n                  return vnode.context[item.callback](item)\r\n                }\r\n              } else {\r\n                // 无callback情况\r\n                optionp.onclick = function() {\r\n                  // 隐藏菜单的父级节点\r\n                  optionp.parentNode.style.display = 'none'\r\n                  // 隐藏遮罩层\r\n                  Mask.style = Maskstyle + 'display:none'\r\n                  return false\r\n                }\r\n              }\r\n              /**\r\n               * 兼容在展开的选项上右击会出现默认右键，以及禁用穿透事件\r\n               */\r\n              optionp.addEventListener('contextmenu', e => {\r\n                var e = event || window.event\r\n                e.stopPropagation() //阻止冒泡事件\r\n                e.cancelBubble = true //阻止冒泡事件ie\r\n                e.preventDefault() //阻止默认事件\r\n              })\r\n              // 如果用户设置了icon\r\n              if (item.icon) {\r\n                // 判断icon位置是左还是右面 -》 可扩展为一个函数 让用户更高程度自定义\r\n                if (\r\n                  item.iconPosition &&\r\n                  (item.iconPosition == 'left' || item.iconPosition == 'right')\r\n                ) {\r\n                  iconPosition = item.iconPosition\r\n                } else {\r\n                  // 默认值 left\r\n                  iconPosition = 'left'\r\n                }\r\n                icon = item.icon\r\n              }\r\n              // 判断content文字 也可以升级为一个函数提高可扩展性\r\n              if (item.content) {\r\n                content = item.content\r\n              }\r\n              // 判断icon是否有\r\n              if (icon != '') {\r\n                // 剧左或者右\r\n                if (iconPosition == 'right') {\r\n                  // 生成img\r\n                  let img = new Image()\r\n                  img.src = icon\r\n                  img.style = (item.iconStyle || '') + 'vertical-align:middle;'\r\n                  optionp.innerHTML = content\r\n                  // 追加到option\r\n                  optionp.appendChild(img)\r\n                } else {\r\n                  let img = new Image()\r\n                  img.src = icon\r\n                  img.style = (item.iconStyle || '') + 'vertical-align:middle;'\r\n                  optionp.appendChild(img)\r\n                  optionp.innerHTML += content\r\n                }\r\n              } else {\r\n                // 设置文字内容\r\n                optionp.innerHTML = content\r\n              }\r\n              /**\r\n               * 兼容屏幕出界的情况；\r\n               */\r\n              optionp.style = `text-align:center;overflow: hidden;text-overflow:ellipsis;white-space:nowrap;margin-block-start: 0em;margin-block-end: 0em;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;${\r\n                binding.value['optionStyle'] ? binding.value['optionStyle'] : ''\r\n              };${item['style'] ? item['style'] : ''};`\r\n              // 追加选项到总菜单\r\n              boxDiv.appendChild(optionp)\r\n            })\r\n            // 设置唯一id\r\n            boxDiv.setAttribute('id', 'tt_right_menu' + currentSize)\r\n            // 菜单的样式\r\n            boxDiv.style = `background:#fff;color:#333;${\r\n              binding.value['boxStyle'] ? binding.value['boxStyle'] : ''\r\n            };position:fixed;z-index:99999;top:${menuY}px;left:${menuX}px;`\r\n            //    追加到页面\r\n            document.body.appendChild(boxDiv)\r\n            let divWidth = boxDiv.clientWidth || boxDiv.offsetWidth\r\n          } else {\r\n            // 节点已经存在则不需要重复创建 节省性能，只需要获取后设置位置即可\r\n            let boxDiv = document.getElementById('tt_right_menu' + currentSize)\r\n            boxDiv.style = `color:#333;background:#fff;${\r\n              binding.value['boxStyle'] ? binding.value['boxStyle'] : ''\r\n            };position:fixed;z-index:99999;top:${menuY}px;left:${menuX}px;`\r\n            /**\r\n             * 判断是否超出屏幕宽度\r\n             */\r\n            if (menuX + boxDiv.clientWidth >= document.body.clientWidth) {\r\n              boxDiv.style.left = menuX - boxDiv.clientWidth + 'px'\r\n            }\r\n            /**\r\n             * 判断是否超出屏幕高度\r\n             */\r\n            if (menuY + boxDiv.clientHeight >= document.body.clientHeight) {\r\n              boxDiv.style.top = menuY - boxDiv.clientHeight + 'px'\r\n            }\r\n          }\r\n        })\r\n        // 每次创建都会使得唯一遍量增加 防止重复\r\n        GLOBLEsize++\r\n        // 增加遮罩层的点击事件 （在空白处点击移除右键菜单）-》包含左键和右键点击\r\n        document.getElementById('TT_MASK').addEventListener('click', () => {\r\n          if (document.getElementById('tt_right_menu' + currentSize)) {\r\n            document.getElementById(\r\n              'tt_right_menu' + currentSize\r\n            ).style = `display:none`\r\n          }\r\n          document.getElementById('TT_MASK').style = 'display:none'\r\n        })\r\n        document\r\n          .getElementById('TT_MASK')\r\n          .addEventListener('contextmenu', () => {\r\n            if (document.getElementById('tt_right_menu' + currentSize)) {\r\n              document.getElementById(\r\n                'tt_right_menu' + currentSize\r\n              ).style = `display:none`\r\n            }\r\n            document.getElementById('TT_MASK').style = 'display:none'\r\n          })\r\n      },\r\n      unbind(el) {\r\n        // 解绑时候移除右键监听防止影响其他页面\r\n        el.removeEventListener('contextmenu', this, true)\r\n      }\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/mouserightmenu/index.js"],"sourceRoot":""}